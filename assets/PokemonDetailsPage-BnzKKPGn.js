import{r as m,j as e,a as P,H as y}from"./index-J_bW_MAS.js";import{S as A,A as C,b as k,f as S}from"./blur-BT1KR2t4.js";const $=({label:c,value:o,color:a="#66ccff"})=>{const[r,d]=m.useState("0%"),l=n=>({hp:"HP",attack:"Ataque",defense:"Defensa","special-attack":"Ataque Especial","special-defense":"Defensa Especial",speed:"Velocidad"})[n].toUpperCase()||n.toUpperCase();return m.useEffect(()=>{const n=setTimeout(()=>{d(`${o}%`)},100);return()=>clearTimeout(n)},[o]),e.jsxs("div",{className:"stat",children:[e.jsxs("div",{className:"stat-label",children:[e.jsx("strong",{children:l(c)}),e.jsx("span",{children:o})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:r,backgroundColor:a}})})]})},b={grass:"#66cc66",fire:"#ff9933",water:"#66ccff",bug:"#99cc33",poison:"#8a2be2",flying:"#99ccff",electric:"#ffcc33",psychic:"#ff66cc",rock:"#b8a038",ground:"#e0c068",fairy:"#ee99ac",ice:"#66ffff",dragon:"#7038f8",dark:"#705848",ghost:"#705898",fighting:"#c03028",steel:"#b8b8d0",normal:"#a8a878"},D=()=>{const{name:c}=P(),o=y(),[a,r]=m.useState(!0),[d,l]=m.useState(null),[n,s]=m.useState([]);return{name:c,loading:a,pokemon:d,evolutions:n,getPokemon:async()=>{try{r(!0);const p=await fetch(`https://pokeapi.co/api/v2/pokemon/${c}`);if(!p.ok)throw new Error("Error fetching Pokémon");const i=await p.json(),h=i.types.map(t=>t.type.name),N=h[0];let u=b[N]||"#ccc";u==="#a8a878"&&h.length>1&&(u=b[h[1]]),l({id:`#${i.id.toString().padStart(3,"0")}`,name:i.name.charAt(0).toUpperCase()+i.name.slice(1),img:i.sprites?.other?.["official-artwork"]?.front_default,weight:`${(i.weight/10).toFixed(1)} kg`,height:`${(i.height/10).toFixed(1)} m`,types:h.join(" / "),color:u,stats:i.stats.map(t=>({name:t.stat.name,value:t.base_stat})),abilities:i.abilities.map(t=>t.ability.name)});const w=await(await fetch(i.species.url)).json(),E=await(await fetch(w.evolution_chain.url)).json(),g=[],x=t=>{t&&(g.push(t.species.name),t.evolves_to.forEach(j=>x(j)))};x(E.chain);const L=await Promise.all(g.map(async t=>{const v=await(await fetch(`https://pokeapi.co/api/v2/pokemon/${t}`)).json();return{name:v.name,img:v.sprites?.other?.["official-artwork"]?.front_default}}));s(L)}catch(p){console.error("Error fetching Pokémon details:",p),A.fire("Error","Error fetching Pokémon details","error"),o("/")}finally{r(!1)}}}},U=()=>{const{name:c,loading:o,pokemon:a,getPokemon:r,evolutions:d}=D(),l=y(),n=s=>s.split("-").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ");return m.useEffect(()=>{r()},[c]),e.jsx(e.Fragment,{children:o?e.jsx("div",{className:"pokemon-detail",children:e.jsx("div",{className:"spinner",children:e.jsx("div",{className:"spinnerin"})})}):e.jsx(e.Fragment,{children:a&&e.jsxs("div",{className:"pokemon-detail",children:[e.jsx("button",{className:"animated-button",onClick:()=>l(-1),children:e.jsx(C,{text:"Atrás",icon:e.jsx("path",{d:"M7.8284 11H20V13H7.8284L13.1924 18.364L11.7782 19.7782L4 12L11.7782 4.22183L13.1924 5.63604L7.8284 11Z"})})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"pokemon-img-container",children:e.jsx(k.LazyLoadImage,{src:a.img,alt:`Imagen de ${a.name}`,className:"pokemon-img",effect:"blur",threshold:150})}),e.jsx("h1",{style:{marginBottom:"30px"},children:a.name}),e.jsxs("span",{className:"card-id",children:["ID: ",a.id]}),e.jsxs("p",{children:["Altura: ",a.height]}),e.jsxs("p",{children:["Peso: ",a.weight]}),e.jsxs("div",{className:"types-container",children:["Tipos: ",S(a.types)]}),e.jsxs("div",{className:"stats",children:[e.jsx("h2",{children:"Estadísticas"}),a.stats.map(s=>e.jsx("div",{className:"stat-item",children:e.jsx($,{label:s.name,value:s.value,color:a.color})},s.name))]}),e.jsxs("div",{className:"abilities",children:[e.jsx("h2",{children:"Habilidades"}),e.jsx("ul",{children:a.abilities.map(s=>e.jsx("li",{children:n(s)},s))})]}),e.jsxs("div",{className:"evolutions",children:[e.jsx("h2",{children:"Evoluciones"}),e.jsx("div",{className:"evolution-chain",children:d.map(s=>e.jsxs("div",{className:"evo-card",onClick:()=>l(`/pokemon/${s.name}`),children:[e.jsx(k.LazyLoadImage,{src:s.img,alt:`Imagen de ${s.name}`,effect:"blur",threshold:150}),e.jsx("p",{children:s.name.charAt(0).toUpperCase()+s.name.slice(1)})]},s.name))})]})]})]})})})};export{U as default};
